<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Widget Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f3f4f6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .viewport-controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        .viewport-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .viewport-btn {
            padding: 12px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        .viewport-btn:hover {
            background: #2563eb;
        }
        .viewport-btn.active {
            background: #1d4ed8;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .current-viewport {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
        }
        .viewport-info {
            font-size: 14px;
            color: #6b7280;
        }
        .widget-test-area {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }
        .widget-frame {
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            padding: 20px;
            background: #f9fafb;
            transition: all 0.3s ease;
        }
        .widget-frame.mobile {
            width: 320px;
        }
        .widget-frame.mobile-large {
            width: 480px;
        }
        .widget-frame.tablet {
            width: 768px;
        }
        .widget-frame.desktop {
            width: 1024px;
        }
        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .control-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .control-btn {
            padding: 8px 16px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .control-btn:hover {
            background: #059669;
        }
        .control-btn.active {
            background: #047857;
        }
        .info {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }
        .info h3 {
            margin: 0 0 8px 0;
            color: #0c4a6e;
        }
        .info p {
            margin: 0;
            color: #0c4a6e;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Responsive Widget Test</h1>
        
        <div class="info">
            <h3>üéØ Uniform Mobile-Style Layout</h3>
            <p>All viewports now use the same compact, mobile-style layout that scales proportionally. The widget maintains consistent spacing, typography, and proportions across all screen sizes for a uniform appearance.</p>
        </div>

        <div class="viewport-controls">
            <div class="current-viewport" id="current-viewport">üì± Mobile (320px)</div>
            <div class="viewport-info" id="viewport-info">Compact layout optimized for small screens</div>
            <div class="viewport-buttons">
                <button class="viewport-btn active" onclick="switchViewport('mobile')">üì± Mobile (320px)</button>
                <button class="viewport-btn" onclick="switchViewport('mobile-large')">üì± Mobile Large (480px)</button>
                <button class="viewport-btn" onclick="switchViewport('tablet')">üíª Tablet (768px)</button>
                <button class="viewport-btn" onclick="switchViewport('desktop')">üñ•Ô∏è Desktop (1024px)</button>
            </div>
        </div>

        <div class="widget-test-area">
            <div class="widget-frame mobile" id="widget-frame">
                <div id="iqama-widget-container">
                    <p style="text-align: center; color: #6b7280;">Widget will appear here...</p>
                </div>
            </div>
        </div>

        <div class="controls">
            <h3>üîß Widget Controls</h3>
            <div class="control-group">
                <button class="control-btn active" onclick="testJumuahCount(1)">1 Jumuah</button>
                <button class="control-btn" onclick="testJumuahCount(2)">2 Jumuahs</button>
                <button class="control-btn" onclick="testJumuahCount(3)">3 Jumuahs</button>
            </div>
            <div class="control-group">
                <button class="control-btn" onclick="testTimeType('athan')">Athan Times</button>
                <button class="control-btn" onclick="testTimeType('iqama')">Iqama Times</button>
            </div>
        </div>
    </div>

    <script>
        // Widget configuration
        window.IqamaWidgetConfig = {
            googleSheetUrl: 'https://docs.google.com/spreadsheets/d/14yebmqPkLo0fT0GdlXW1vq0Y4jZsYtNgbK3ijTAIQlU/edit?usp=sharing',
            title: 'Masjid Al-Noor',
            location: 'Phoenix, United States',
            backgroundColor: '#1a1a1a',
            accentColor: '#ffffff',
            borderRadius: '20px',
            timeType: 'athan',
            jumuahCount: 1,
            debug: true
        };

        const viewportInfo = {
            mobile: {
                label: 'üì± Mobile (320px)',
                description: 'Compact uniform layout - same style across all sizes'
            },
            'mobile-large': {
                label: 'üì± Mobile Large (480px)',
                description: 'Same compact layout, scaled proportionally'
            },
            tablet: {
                label: 'üíª Tablet (768px)',
                description: 'Uniform mobile-style layout, scaled up'
            },
            desktop: {
                label: 'üñ•Ô∏è Desktop (1024px)',
                description: 'Consistent compact design, proportionally scaled'
            }
        };

        function switchViewport(viewport) {
            // Update active button
            document.querySelectorAll('.viewport-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update viewport info
            document.getElementById('current-viewport').textContent = viewportInfo[viewport].label;
            document.getElementById('viewport-info').textContent = viewportInfo[viewport].description;
            
            // Update widget frame
            const frame = document.getElementById('widget-frame');
            frame.className = `widget-frame ${viewport}`;
            
            // Recreate widget with new viewport
            recreateWidget();
        }

        function testJumuahCount(count) {
            // Update active button
            document.querySelectorAll('.control-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update configuration
            window.IqamaWidgetConfig.jumuahCount = count;
            
            // Recreate widget
            recreateWidget();
        }

        function testTimeType(type) {
            // Update active button
            document.querySelectorAll('.control-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update configuration
            window.IqamaWidgetConfig.timeType = type;
            
            // Recreate widget
            recreateWidget();
        }

        function recreateWidget() {
            const container = document.getElementById('iqama-widget-container');
            if (container) {
                container.innerHTML = '<p style="text-align: center; color: #6b7280;">Loading widget...</p>';
                
                // Wait a moment then create the widget
                setTimeout(() => {
                    if (window.createWidget) {
                        window.createWidget();
                    }
                }, 100);
            }
        }

        // Initialize widget on load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(recreateWidget, 500);
        });
    </script>

    <!-- Load the widget script -->
    <script src="../prayer-times-widget.js"></script>
</body>
</html>
